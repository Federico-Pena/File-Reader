import { createRequire } from "node:module"; const require = createRequire(import.meta.url);

// src/service/repairBreakLines.ts
var repairBreakLines = (rawText) => {
  let text = rawText;
  text = normalizeQuotes(text);
  text = normalizeBullets(text);
  text = fixApostrophes(text);
  text = fixOCRDotNoise(text);
  text = cleanLineEdges(text);
  text = fixHyphenBreaks(text);
  text = gentleRejoinWrappedLines(text);
  text = removeIsolatedSymbols(text);
  text = fixSpacingBeforePunctuation(text);
  text = removePageNumbers(text);
  text = normalizePunctuation(text);
  text = text.replace(/ +/g, " ").trim();
  return text.trim().split(/\n+/).map((line) => line.trim()).join("\n\n");
};
function normalizeQuotes(text) {
  return text.replace(/[“”«'»„]/g, '"').replace(/[‘’‚‛]/g, "'");
}
function normalizeBullets(text) {
  return text.replace(
    /^[\s\t]*(["*•·→»_◦▪▫■□●○‣‣►▶⟶\-–—]+)[\s\t]+([A-ZÁÉÍÓÚÜ])/gm,
    "\u25CF $2"
  ).replace(/^\●\s*\●\s*/gm, "\u25CF ").replace(/^\●\s*(?=\S)/gm, "\u25CF ");
}
function fixApostrophes(text) {
  return text.replace(
    /([A-ZÁÉÍÓÚÜa-záéíóúñü])["']([A-ZÁÉÍÓÚÜa-záéíóúñü])/gm,
    "$1'$2"
  );
}
function fixOCRDotNoise(text) {
  return text.replace(/\b(?:[a-z]*([a-z])\1{2,}[a-z]*){1,}\b/gi, (match) => {
    if (match === "www") return "www.";
    return ".".repeat(match.split("").length);
  });
}
function cleanLineEdges(text) {
  text = text.replace(/^\s*[\_\~\|\.\,\!\?\-]+\s*/gm, "");
  return text.replace(/\s+[\_\~\|\.\,\!\?\-]\w*/g, " ");
}
function fixHyphenBreaks(text) {
  return text.replace(/([a-záéíóúñü])\s*-\s*\W?\n\s*([a-záéíóúñü])/gi, "$1$2");
}
function gentleRejoinWrappedLines(text) {
  return text.replace(/([a-záéíóúñü,;:()])\s*\n\s*([a-záéíóúñü"()])/gm, "$1 $2").replace(/([a-záéíóúñü,;:])\s*\n\s*(\d{1,3})(?!\s*[\.\)\-])/gm, "$1 $2").replace(/([a-záéíóúñü,;":()])\n([a-záéíóúñü"()])/gm, "$1 $2").replace(/\n+(['(])/g, " $1").replace(/([0-9A-ZÁÉÍÓÑÜ,;"()])\n([a-záéíóúñü'"()])/gm, "$1 $2").replace(/([a-záéíóúñü,;"()])\n([A-ZÁÉÍÓÚÑÜ][a-záéíóúñü])/gm, "$1 $2");
}
function removeIsolatedSymbols(text) {
  return text.replace(/(?<=\s)[^\w](?=\s)/gi, (match) => {
    if (["&", "-", ".", ",", "\xAE", "\xA9", "\u25CF"].includes(match)) return match;
    return "";
  });
}
function fixSpacingBeforePunctuation(text) {
  return text.replace(/\s+([,\.;:!?…])/g, "$1");
}
function removePageNumbers(text) {
  return text.replace(/^\s*\d+\s*$/gm, "").replace(/^\s*Página\s*\d+\s*$/gim, "").replace(/^\s*[-–—]\s*\d+\s*[-–—]\s*$/gm, "");
}
function normalizePunctuation(text) {
  const protections = { "etc.,": "__ETC_COMMA__" };
  for (const [pattern, token] of Object.entries(protections)) {
    text = text.replace(new RegExp(pattern, "gm"), token);
  }
  text = text.replace(/\.{2,}/g, "...");
  text = text.replace(/([@©,\.;:!?='…]{1,})/g, (run) => {
    const uniq = Array.from(new Set(run.split("")));
    return uniq[0] ?? "";
  });
  text = text.replace(/([|"@©,\.;:!?'…()])\1+/g, "$1");
  text = text.replace(/\s+([,\.;:!?…])/g, "$1");
  for (const [pattern, token] of Object.entries(protections)) {
    text = text.replace(new RegExp(token, "gm"), pattern);
  }
  return text;
}
export {
  repairBreakLines
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vc3JjL3NlcnZpY2UvcmVwYWlyQnJlYWtMaW5lcy50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyoqXHJcbiAqIC0gQ29ycmlnZSBjb21pbGxhcywgYnVsbGV0cywgZ3Vpb25lcywgcHVudHVhY2lcdTAwRjNuIHkgc2FsdG9zIGRlIGxcdTAwRURuZWEgaW5jb3JyZWN0b3MuXHJcbiAqIC0gRWwgb2JqZXRpdm8gZXMgZGVqYXIgbFx1MDBFRG5lYXMgbFx1MDBGM2dpY2FzIGxpbXBpYXMgeSBsaXN0YXMgcGFyYSB0b2tlbml6YWNpXHUwMEYzbiBzZW1cdTAwRTFudGljYS5cclxuICovXHJcbmV4cG9ydCBjb25zdCByZXBhaXJCcmVha0xpbmVzID0gKHJhd1RleHQ6IHN0cmluZykgPT4ge1xyXG4gIGxldCB0ZXh0ID0gcmF3VGV4dFxyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyAoMSkgTk9STUFMSVpBQ0lPTkVTIEJcdTAwQzFTSUNBUyBERSBDQVJBQ1RFUkVTXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgdGV4dCA9IG5vcm1hbGl6ZVF1b3Rlcyh0ZXh0KVxyXG4gIHRleHQgPSBub3JtYWxpemVCdWxsZXRzKHRleHQpXHJcbiAgdGV4dCA9IGZpeEFwb3N0cm9waGVzKHRleHQpXHJcbiAgdGV4dCA9IGZpeE9DUkRvdE5vaXNlKHRleHQpXHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vICgyKSBMSU1QSUVaQSBERSBTXHUwMENETUJPTE9TIC8gUlVJRE8gQUwgSU5JQ0lPIFkgRklOQUwgREUgTFx1MDBDRE5FQVxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIHRleHQgPSBjbGVhbkxpbmVFZGdlcyh0ZXh0KVxyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyAoMykgUkVQQVJBQ0lcdTAwRDNOIERFIFNBTFRPUyBERSBMXHUwMENETkVBXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgdGV4dCA9IGZpeEh5cGhlbkJyZWFrcyh0ZXh0KVxyXG4gIHRleHQgPSBnZW50bGVSZWpvaW5XcmFwcGVkTGluZXModGV4dClcclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gKDQpIExJTVBJRVpBIERFIFNcdTAwQ0RNQk9MT1MgQUlTTEFET1MgWSBFU1BBQ0lBRE9TIElOQ09SUkVDVE9TXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgdGV4dCA9IHJlbW92ZUlzb2xhdGVkU3ltYm9scyh0ZXh0KVxyXG4gIHRleHQgPSBmaXhTcGFjaW5nQmVmb3JlUHVuY3R1YXRpb24odGV4dClcclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gKDUpIEVMSU1JTkFDSVx1MDBEM04gREUgTlVNRVJBQ0lcdTAwRDNOIERFIFBcdTAwQzFHSU5BIC8gSEVBREVSU1xyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIHRleHQgPSByZW1vdmVQYWdlTnVtYmVycyh0ZXh0KVxyXG5cclxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyAoNikgTk9STUFMSVpBQ0lcdTAwRDNOIEZJTkFMIERFIFBVTlRVQUNJXHUwMEQzTiBZIEVTUEFDSU9TXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgdGV4dCA9IG5vcm1hbGl6ZVB1bmN0dWF0aW9uKHRleHQpXHJcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvICsvZywgJyAnKS50cmltKClcclxuXHJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gU0FMSURBOiBsXHUwMEVEbmVhcyBzZXBhcmFkYXMgbGltcGlhc1xyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIHJldHVybiB0ZXh0XHJcbiAgICAudHJpbSgpXHJcbiAgICAuc3BsaXQoL1xcbisvKVxyXG4gICAgLm1hcCgobGluZSkgPT4gbGluZS50cmltKCkpXHJcbiAgICAuam9pbignXFxuXFxuJylcclxufVxyXG5cclxuLy9cclxuLy8gXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHUyNTAwXHJcbi8vIFNVQkZVTkNJT05FU1xyXG4vLyBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcdTI1MDBcclxuLy9cclxuXHJcbi8vICgxKSAtLS0gTm9ybWFsaXphY2lcdTAwRjNuIGJcdTAwRTFzaWNhIGRlIGNhcmFjdGVyZXMgLS0tXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVF1b3Rlcyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoL1tcdTIwMUNcdTIwMURcdTAwQUInXHUwMEJCXHUyMDFFXS9nLCAnXCInKS5yZXBsYWNlKC9bXHUyMDE4XHUyMDE5XHUyMDFBXHUyMDFCXS9nLCBcIidcIilcclxufVxyXG5cclxuZnVuY3Rpb24gbm9ybWFsaXplQnVsbGV0cyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiB0ZXh0XHJcbiAgICAucmVwbGFjZShcclxuICAgICAgL15bXFxzXFx0XSooW1wiKlx1MjAyMlx1MDBCN1x1MjE5Mlx1MDBCQl9cdTI1RTZcdTI1QUFcdTI1QUJcdTI1QTBcdTI1QTFcdTI1Q0ZcdTI1Q0JcdTIwMjNcdTIwMjNcdTI1QkFcdTI1QjZcdTI3RjZcXC1cdTIwMTNcdTIwMTRdKylbXFxzXFx0XSsoW0EtWlx1MDBDMVx1MDBDOVx1MDBDRFx1MDBEM1x1MDBEQVx1MDBEQ10pL2dtLFxyXG4gICAgICAnXHUyNUNGICQyJ1xyXG4gICAgKVxyXG4gICAgLnJlcGxhY2UoL15cXFx1MjVDRlxccypcXFx1MjVDRlxccyovZ20sICdcdTI1Q0YgJylcclxuICAgIC5yZXBsYWNlKC9eXFxcdTI1Q0ZcXHMqKD89XFxTKS9nbSwgJ1x1MjVDRiAnKVxyXG59XHJcblxyXG5mdW5jdGlvbiBmaXhBcG9zdHJvcGhlcyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoXHJcbiAgICAvKFtBLVpcdTAwQzFcdTAwQzlcdTAwQ0RcdTAwRDNcdTAwREFcdTAwRENhLXpcdTAwRTFcdTAwRTlcdTAwRURcdTAwRjNcdTAwRkFcdTAwRjFcdTAwRkNdKVtcIiddKFtBLVpcdTAwQzFcdTAwQzlcdTAwQ0RcdTAwRDNcdTAwREFcdTAwRENhLXpcdTAwRTFcdTAwRTlcdTAwRURcdTAwRjNcdTAwRkFcdTAwRjFcdTAwRkNdKS9nbSxcclxuICAgIFwiJDEnJDJcIlxyXG4gIClcclxufVxyXG5cclxuZnVuY3Rpb24gZml4T0NSRG90Tm9pc2UodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cXGIoPzpbYS16XSooW2Etel0pXFwxezIsfVthLXpdKil7MSx9XFxiL2dpLCAobWF0Y2gpID0+IHtcclxuICAgIGlmIChtYXRjaCA9PT0gJ3d3dycpIHJldHVybiAnd3d3LidcclxuICAgIHJldHVybiAnLicucmVwZWF0KG1hdGNoLnNwbGl0KCcnKS5sZW5ndGgpXHJcbiAgfSlcclxufVxyXG5cclxuLy8gKDIpIC0tLSBMaW1waWV6YSBkZSBzXHUwMEVEbWJvbG9zIGV4dHJhXHUwMEYxb3MgYWwgaW5pY2lvL2ZpbmFsIGRlIGxcdTAwRURuZWEgLS0tXHJcbmZ1bmN0aW9uIGNsZWFuTGluZUVkZ2VzKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvXlxccypbXFxfXFx+XFx8XFwuXFwsXFwhXFw/XFwtXStcXHMqL2dtLCAnJylcclxuICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cXHMrW1xcX1xcflxcfFxcLlxcLFxcIVxcP1xcLV1cXHcqL2csICcgJylcclxufVxyXG5cclxuLy8gKDMpIC0tLSBSZXBhcmFjaVx1MDBGM24gZGUgc2FsdG9zIGRlIGxcdTAwRURuZWEgLS0tXHJcbmZ1bmN0aW9uIGZpeEh5cGhlbkJyZWFrcyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoLyhbYS16XHUwMEUxXHUwMEU5XHUwMEVEXHUwMEYzXHUwMEZBXHUwMEYxXHUwMEZDXSlcXHMqLVxccypcXFc/XFxuXFxzKihbYS16XHUwMEUxXHUwMEU5XHUwMEVEXHUwMEYzXHUwMEZBXHUwMEYxXHUwMEZDXSkvZ2ksICckMSQyJylcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VudGxlUmVqb2luV3JhcHBlZExpbmVzKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIHRleHRcclxuICAgIC5yZXBsYWNlKC8oW2Etelx1MDBFMVx1MDBFOVx1MDBFRFx1MDBGM1x1MDBGQVx1MDBGMVx1MDBGQyw7OigpXSlcXHMqXFxuXFxzKihbYS16XHUwMEUxXHUwMEU5XHUwMEVEXHUwMEYzXHUwMEZBXHUwMEYxXHUwMEZDXCIoKV0pL2dtLCAnJDEgJDInKVxyXG4gICAgLnJlcGxhY2UoLyhbYS16XHUwMEUxXHUwMEU5XHUwMEVEXHUwMEYzXHUwMEZBXHUwMEYxXHUwMEZDLDs6XSlcXHMqXFxuXFxzKihcXGR7MSwzfSkoPyFcXHMqW1xcLlxcKVxcLV0pL2dtLCAnJDEgJDInKVxyXG4gICAgLnJlcGxhY2UoLyhbYS16XHUwMEUxXHUwMEU5XHUwMEVEXHUwMEYzXHUwMEZBXHUwMEYxXHUwMEZDLDtcIjooKV0pXFxuKFthLXpcdTAwRTFcdTAwRTlcdTAwRURcdTAwRjNcdTAwRkFcdTAwRjFcdTAwRkNcIigpXSkvZ20sICckMSAkMicpXHJcbiAgICAucmVwbGFjZSgvXFxuKyhbJyhdKS9nLCAnICQxJylcclxuICAgIC5yZXBsYWNlKC8oWzAtOUEtWlx1MDBDMVx1MDBDOVx1MDBDRFx1MDBEM1x1MDBEMVx1MDBEQyw7XCIoKV0pXFxuKFthLXpcdTAwRTFcdTAwRTlcdTAwRURcdTAwRjNcdTAwRkFcdTAwRjFcdTAwRkMnXCIoKV0pL2dtLCAnJDEgJDInKVxyXG4gICAgLnJlcGxhY2UoLyhbYS16XHUwMEUxXHUwMEU5XHUwMEVEXHUwMEYzXHUwMEZBXHUwMEYxXHUwMEZDLDtcIigpXSlcXG4oW0EtWlx1MDBDMVx1MDBDOVx1MDBDRFx1MDBEM1x1MDBEQVx1MDBEMVx1MDBEQ11bYS16XHUwMEUxXHUwMEU5XHUwMEVEXHUwMEYzXHUwMEZBXHUwMEYxXHUwMEZDXSkvZ20sICckMSAkMicpXHJcbn1cclxuXHJcbi8vICg0KSAtLS0gTGltcGllemEgZGUgc1x1MDBFRG1ib2xvcyBhaXNsYWRvcyB5IHNwYWNpbmcgLS0tXHJcbmZ1bmN0aW9uIHJlbW92ZUlzb2xhdGVkU3ltYm9scyh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoLyg/PD1cXHMpW15cXHddKD89XFxzKS9naSwgKG1hdGNoKSA9PiB7XHJcbiAgICBpZiAoWycmJywgJy0nLCAnLicsICcsJywgJ1x1MDBBRScsICdcdTAwQTknLCAnXHUyNUNGJ10uaW5jbHVkZXMobWF0Y2gpKSByZXR1cm4gbWF0Y2hcclxuICAgIHJldHVybiAnJ1xyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpeFNwYWNpbmdCZWZvcmVQdW5jdHVhdGlvbih0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiB0ZXh0LnJlcGxhY2UoL1xccysoWyxcXC47OiE/XHUyMDI2XSkvZywgJyQxJylcclxufVxyXG5cclxuLy8gKDUpIC0tLSBFbGltaW5hY2lcdTAwRjNuIGRlIG51bWVyYWNpXHUwMEYzbiBkZSBwXHUwMEUxZ2luYSAtLS1cclxuZnVuY3Rpb24gcmVtb3ZlUGFnZU51bWJlcnModGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICByZXR1cm4gdGV4dFxyXG4gICAgLnJlcGxhY2UoL15cXHMqXFxkK1xccyokL2dtLCAnJylcclxuICAgIC5yZXBsYWNlKC9eXFxzKlBcdTAwRTFnaW5hXFxzKlxcZCtcXHMqJC9naW0sICcnKVxyXG4gICAgLnJlcGxhY2UoL15cXHMqWy1cdTIwMTNcdTIwMTRdXFxzKlxcZCtcXHMqWy1cdTIwMTNcdTIwMTRdXFxzKiQvZ20sICcnKVxyXG59XHJcblxyXG4vLyAoNikgLS0tIE5vcm1hbGl6YWNpXHUwMEYzbiBhdmFuemFkYSBkZSBwdW50dWFjaVx1MDBGM24gLS0tXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZVB1bmN0dWF0aW9uKHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgcHJvdGVjdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7ICdldGMuLCc6ICdfX0VUQ19DT01NQV9fJyB9XHJcblxyXG4gIC8vIFByb3RlZ2VyIGFicmV2aWF0dXJhc1xyXG4gIGZvciAoY29uc3QgW3BhdHRlcm4sIHRva2VuXSBvZiBPYmplY3QuZW50cmllcyhwcm90ZWN0aW9ucykpIHtcclxuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UobmV3IFJlZ0V4cChwYXR0ZXJuLCAnZ20nKSwgdG9rZW4pXHJcbiAgfVxyXG5cclxuICAvLyBFbGlwc2lzXHJcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvXFwuezIsfS9nLCAnLi4uJylcclxuXHJcbiAgLy8gUnVucyBkZSBwdW50dWFjaVx1MDBGM24gKGNvbGFwc2FyIHJlcGV0aWNpb25lcylcclxuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8oW0BcdTAwQTksXFwuOzohPz0nXHUyMDI2XXsxLH0pL2csIChydW4pID0+IHtcclxuICAgIGNvbnN0IHVuaXEgPSBBcnJheS5mcm9tKG5ldyBTZXQocnVuLnNwbGl0KCcnKSkpXHJcbiAgICByZXR1cm4gdW5pcVswXSA/PyAnJ1xyXG4gIH0pXHJcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvKFt8XCJAXHUwMEE5LFxcLjs6IT8nXHUyMDI2KCldKVxcMSsvZywgJyQxJylcclxuXHJcbiAgLy8gRXNwYWNpb3MgYW50ZXMgZGUgc2lnbm9zXHJcbiAgdGV4dCA9IHRleHQucmVwbGFjZSgvXFxzKyhbLFxcLjs6IT9cdTIwMjZdKS9nLCAnJDEnKVxyXG5cclxuICAvLyBSZXN0YXVyYXIgYWJyZXZpYXR1cmFzXHJcbiAgZm9yIChjb25zdCBbcGF0dGVybiwgdG9rZW5dIG9mIE9iamVjdC5lbnRyaWVzKHByb3RlY3Rpb25zKSkge1xyXG4gICAgdGV4dCA9IHRleHQucmVwbGFjZShuZXcgUmVnRXhwKHRva2VuLCAnZ20nKSwgcGF0dGVybilcclxuICB9XHJcblxyXG4gIHJldHVybiB0ZXh0XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7O0FBSU8sSUFBTSxtQkFBbUIsQ0FBQyxZQUFvQjtBQUNuRCxNQUFJLE9BQU87QUFLWCxTQUFPLGdCQUFnQixJQUFJO0FBQzNCLFNBQU8saUJBQWlCLElBQUk7QUFDNUIsU0FBTyxlQUFlLElBQUk7QUFDMUIsU0FBTyxlQUFlLElBQUk7QUFLMUIsU0FBTyxlQUFlLElBQUk7QUFLMUIsU0FBTyxnQkFBZ0IsSUFBSTtBQUMzQixTQUFPLHlCQUF5QixJQUFJO0FBS3BDLFNBQU8sc0JBQXNCLElBQUk7QUFDakMsU0FBTyw0QkFBNEIsSUFBSTtBQUt2QyxTQUFPLGtCQUFrQixJQUFJO0FBSzdCLFNBQU8scUJBQXFCLElBQUk7QUFDaEMsU0FBTyxLQUFLLFFBQVEsT0FBTyxHQUFHLEVBQUUsS0FBSztBQUtyQyxTQUFPLEtBQ0osS0FBSyxFQUNMLE1BQU0sS0FBSyxFQUNYLElBQUksQ0FBQyxTQUFTLEtBQUssS0FBSyxDQUFDLEVBQ3pCLEtBQUssTUFBTTtBQUNoQjtBQVNBLFNBQVMsZ0JBQWdCLE1BQXNCO0FBQzdDLFNBQU8sS0FBSyxRQUFRLGFBQWEsR0FBRyxFQUFFLFFBQVEsV0FBVyxHQUFHO0FBQzlEO0FBRUEsU0FBUyxpQkFBaUIsTUFBc0I7QUFDOUMsU0FBTyxLQUNKO0FBQUEsSUFDQztBQUFBLElBQ0E7QUFBQSxFQUNGLEVBQ0MsUUFBUSxpQkFBaUIsU0FBSSxFQUM3QixRQUFRLGtCQUFrQixTQUFJO0FBQ25DO0FBRUEsU0FBUyxlQUFlLE1BQXNCO0FBQzVDLFNBQU8sS0FBSztBQUFBLElBQ1Y7QUFBQSxJQUNBO0FBQUEsRUFDRjtBQUNGO0FBRUEsU0FBUyxlQUFlLE1BQXNCO0FBQzVDLFNBQU8sS0FBSyxRQUFRLDJDQUEyQyxDQUFDLFVBQVU7QUFDeEUsUUFBSSxVQUFVLE1BQU8sUUFBTztBQUM1QixXQUFPLElBQUksT0FBTyxNQUFNLE1BQU0sRUFBRSxFQUFFLE1BQU07QUFBQSxFQUMxQyxDQUFDO0FBQ0g7QUFHQSxTQUFTLGVBQWUsTUFBc0I7QUFDNUMsU0FBTyxLQUFLLFFBQVEsZ0NBQWdDLEVBQUU7QUFDdEQsU0FBTyxLQUFLLFFBQVEsNkJBQTZCLEdBQUc7QUFDdEQ7QUFHQSxTQUFTLGdCQUFnQixNQUFzQjtBQUM3QyxTQUFPLEtBQUssUUFBUSxpREFBaUQsTUFBTTtBQUM3RTtBQUVBLFNBQVMseUJBQXlCLE1BQXNCO0FBQ3RELFNBQU8sS0FDSixRQUFRLGtEQUFrRCxPQUFPLEVBQ2pFLFFBQVEsdURBQXVELE9BQU8sRUFDdEUsUUFBUSw2Q0FBNkMsT0FBTyxFQUM1RCxRQUFRLGNBQWMsS0FBSyxFQUMzQixRQUFRLCtDQUErQyxPQUFPLEVBQzlELFFBQVEscURBQXFELE9BQU87QUFDekU7QUFHQSxTQUFTLHNCQUFzQixNQUFzQjtBQUNuRCxTQUFPLEtBQUssUUFBUSx3QkFBd0IsQ0FBQyxVQUFVO0FBQ3JELFFBQUksQ0FBQyxLQUFLLEtBQUssS0FBSyxLQUFLLFFBQUssUUFBSyxRQUFHLEVBQUUsU0FBUyxLQUFLLEVBQUcsUUFBTztBQUNoRSxXQUFPO0FBQUEsRUFDVCxDQUFDO0FBQ0g7QUFFQSxTQUFTLDRCQUE0QixNQUFzQjtBQUN6RCxTQUFPLEtBQUssUUFBUSxvQkFBb0IsSUFBSTtBQUM5QztBQUdBLFNBQVMsa0JBQWtCLE1BQXNCO0FBQy9DLFNBQU8sS0FDSixRQUFRLGlCQUFpQixFQUFFLEVBQzNCLFFBQVEsMkJBQTJCLEVBQUUsRUFDckMsUUFBUSxpQ0FBaUMsRUFBRTtBQUNoRDtBQUdBLFNBQVMscUJBQXFCLE1BQXNCO0FBQ2xELFFBQU0sY0FBc0MsRUFBRSxTQUFTLGdCQUFnQjtBQUd2RSxhQUFXLENBQUMsU0FBUyxLQUFLLEtBQUssT0FBTyxRQUFRLFdBQVcsR0FBRztBQUMxRCxXQUFPLEtBQUssUUFBUSxJQUFJLE9BQU8sU0FBUyxJQUFJLEdBQUcsS0FBSztBQUFBLEVBQ3REO0FBR0EsU0FBTyxLQUFLLFFBQVEsV0FBVyxLQUFLO0FBR3BDLFNBQU8sS0FBSyxRQUFRLHlCQUF5QixDQUFDLFFBQVE7QUFDcEQsVUFBTSxPQUFPLE1BQU0sS0FBSyxJQUFJLElBQUksSUFBSSxNQUFNLEVBQUUsQ0FBQyxDQUFDO0FBQzlDLFdBQU8sS0FBSyxDQUFDLEtBQUs7QUFBQSxFQUNwQixDQUFDO0FBQ0QsU0FBTyxLQUFLLFFBQVEsMkJBQTJCLElBQUk7QUFHbkQsU0FBTyxLQUFLLFFBQVEsb0JBQW9CLElBQUk7QUFHNUMsYUFBVyxDQUFDLFNBQVMsS0FBSyxLQUFLLE9BQU8sUUFBUSxXQUFXLEdBQUc7QUFDMUQsV0FBTyxLQUFLLFFBQVEsSUFBSSxPQUFPLE9BQU8sSUFBSSxHQUFHLE9BQU87QUFBQSxFQUN0RDtBQUVBLFNBQU87QUFDVDsiLAogICJuYW1lcyI6IFtdCn0K
